name: XMRig Miner (Debian 12 / HA Supervised)
slug: xmrig
description: >
  High-performance Monero miner with MSR and host access.
  Intended for Debian 12 host running Home Assistant Supervised (NOT Home Assistant OS).
  Requires elevated permissions (host network, /dev/cpu, capabilities). Not suitable for "Protection mode".
version: "6.21.7"
url: "https://github.com/Bearstorm/ha-xmrig-addon"

arch:
  - amd64

startup: services
boot: auto
init: false

host_network: true
host_pid: true

# Dôležité pre MSR + menej obmedzení profilu:
apparmor: false

privileged:
  - SYS_RAWIO
  - SYS_ADMIN
  - SYS_NICE
  - IPC_LOCK

devices:
  - /dev/cpu:/dev/cpu:rwm

kernel_modules: true
full_access: true

options:
  pool: "pool.supportxmr.com"
  port: 443
  wallet: ""
  worker: "HA"
  threads: 2
  priority: 2
  msr_mod: true

schema:
  pool: str
  port: int
  wallet: str
  worker: str
  threads: int
  priority: int
  msr_mod: bool
